##  5.1 Cookie机制

JS 查看网站颁发的Cookie **document.cookie**

Javax.servler.http.Cookie
request.getCookie()
response.addCookie(Cookie cookie)

**不可跨域名性**

Unicode编码：保存中文

BASE64编码：保存二进制图片

JSESSIONID 是Tomcat自动生成的Cookie
### Cookie的有效期
maxAge 默认为-1
**maxAge属性为正数**，则Cookie会在maxAge秒后自动失效。
cookie.setMaxAge(Integer.MAX_VALUE);设置生命周期为MAX_VALUE
**maxAge属性为负数**，则表示该Cookie仅在本浏览器窗口以及本窗口打开的子窗口内有效，关闭窗口后该Cookie即失效。
为负数的Cookie是临时性Cookie，不会被持久化，不会被写到Cookie文件中，保存在浏览器内存中，关闭浏览器Cookie就消失了。
**maxAge为0**，表示删除该Cookie。
### Cookie修改、删除
修改，新建一个同名Cookie替换
删除，setMaxAge(0)删除
### Cookie的域名
cookie.setDomain()
domain参数必须以点（“.”）开始
### Cookie的路径
cookie.setPath("/");
设置为/时允许所有路径使用Cookie，需要以“/”结尾。
### Cookie的安全属性
cookie.setSecure(true);
Cookie的secure属性为true，不会在HTTP等非安全协议中传输，浏览器只会在HTTPS和SSL等安全协议中传输此类Cookie。
### 永久登录
  存Cookie username password MD5加密后

## 5.2 Session机制
存在服务器内存

Javax.servlet.http.HttpSession
request.getSession()
request.getSession(boolean create)

### Session生命周期
Session在用户第一次访问服务器的时候自动创建。
Session生成后，只要用户继续访问，服务器就会更新Session的最后访问时间，并维护该Session

### Session有效期
Session超时时间为maxInactiveInterval属性，通过getMaxInactiveInterval()获取，通过setMaxInactiveInterval(long interval)修改。
Session的超时时间也可以在web.xml中修改。
调用invalidate()使Session失效。

### Session对浏览器的要求
虽然Session是保存在服务器，对客户端是透明的，它的正常运行任然需要客户端浏览器的支持。这是因为Session需要使用Cookie作为识别标志。HTTP协议是无状态的，Session不能依据HTTP连接来判断是否为同一客户，因此服务器向客户端浏览器发送一个名为 **JSESSIONID的Cookie** ,它的值为该Session的id（也就是 **HttpSession.getId()** 的返回值）。Session依据该Cookie来识别是否为同一用户。
该Cookie为服务器自动生成的，它的maxAge属性一般为-1，表示仅当前浏览器内有效，并且各浏览器窗口间不共享，关闭浏览器就会失效。因此同一机器的两个浏览器窗口访问服务器时，会生成两个不同的Session。但是由浏览器窗口内的链接、脚本等打开新窗口（也就是说不是双击桌面浏览器图标等打开的窗口）除外。这类子窗口会共享父窗口的Cookie，因此会共享一个Session。
###
